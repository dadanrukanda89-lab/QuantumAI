<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0">
    <title>QuantumAI v6 | Sulung Protocol</title>
    <style>
        :root { --neon: #00ff7f; }
        body, html { 
            margin: 0; padding: 0; background: #000; 
            width: 100%; height: 100%; overflow: hidden; 
            font-family: 'Courier New', monospace;
        }

        /* Container Meja Gambar (Bisa di-Zoom & Geser) */
        #viewport {
            width: 1000px; /* Lebar standar workflow */
            height: 1500px; 
            position: absolute;
            transform-origin: 0 0;
            cursor: grab;
            background-image: url('https://raw.githubusercontent.com/dadanrukanda89-lab/QuantumAI/main/1000069403.png'); /* Gambar workflow lo */
            background-size: contain;
            background-repeat: no-repeat;
        }

        /* Overlay Data (Nempel di atas kotak gambar) */
        .data-overlay { position: absolute; color: var(--neon); font-weight: bold; text-align: center; pointer-events: none; }

        /* Koordinat Posisi Data (Gue pasin sama gambar lo) */
        #sig-val { top: 310px; left: 60px; width: 180px; font-size: 2.2rem; text-shadow: 0 0 10px var(--neon); }
        #mom-val { top: 310px; left: 320px; width: 180px; font-size: 2.2rem; }
        #vol-val { top: 110px; left: 60px; width: 180px; font-size: 1rem; color: #00d2ff; }
        
        /* Terminal Chat nempel di kotak bawah */
        #log-stream { 
            top: 715px; left: 185px; width: 630px; height: 120px; 
            overflow: hidden; font-size: 0.7rem; text-align: left; 
            padding: 10px; line-height: 1.2;
        }

        /* UI Kontrol Floating */
        .controls {
            position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%);
            z-index: 1000; display: flex; gap: 10px; background: rgba(0,0,0,0.7);
            padding: 10px; border: 1px solid var(--neon); border-radius: 30px;
        }
        .btn { background: none; border: 1px solid var(--neon); color: var(--neon); padding: 8px 15px; border-radius: 20px; cursor: pointer; }
    </style>
</head>
<body>

    <div class="controls">
        <button class="btn" onclick="adjustZoom(0.2)">ZOOM IN</button>
        <button class="btn" onclick="adjustZoom(-0.2)">ZOOM OUT</button>
        <div style="color:var(--neon); padding-top:5px; font-size:0.8rem;">DRUKANDA // V6</div>
    </div>

    <div id="viewport">
        <div id="sig-val" class="data-overlay">SCAN</div>
        <div id="mom-val" class="data-overlay">0%</div>
        <div id="vol-val" class="data-overlay">VOL: 0.00B</div>
        <div id="log-stream" class="data-overlay"></div>
    </div>

    <script>
        let scale = 0.4; // Start zoom agak jauh biar kelihatan semua
        const view = document.getElementById('viewport');

        function adjustZoom(amt) {
            scale = Math.min(Math.max(0.2, scale + amt), 2);
            view.style.transform = `scale(${scale})`;
        }

        // Fitur Drag/Geser (Untuk HP & Mouse)
        let isDragging = false; let startX, startY, scrollX, scrollY;
        document.addEventListener('mousedown', e => { isDragging = true; startX = e.pageX; startY = e.pageY; });
        document.addEventListener('mousemove', e => {
            if(!isDragging) return;
            window.scrollBy(startX - e.pageX, startY - e.pageY);
            startX = e.pageX; startY = e.pageY;
        });
        document.addEventListener('mouseup', () => isDragging = false);

        async function sync() {
            try {
                const r = await fetch('/update_engine');
                const d = await r.json();
                document.getElementById('sig-val').innerText = d.signal;
                document.getElementById('sig-val').style.color = (d.signal === 'BUY') ? '#00ff7f' : (d.signal === 'SELL' ? '#ff4444' : '#fff');
                document.getElementById('mom-val').innerText = d.momentum + '%';
                document.getElementById('vol-val').innerText = "VOL: " + d.vol;
                const log = document.getElementById('log-stream');
                log.innerHTML = `<div>> ${d.log_msg}</div>` + log.innerHTML;
            } catch (e) {}
        }
        setInterval(sync, 3000);
        adjustZoom(0); // Initial set
    </script>
</body>
</html>
